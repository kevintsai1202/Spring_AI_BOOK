# 3.3 API æ¸¬è©¦èˆ‡æ–‡ä»¶åŒ–

> **æœ¬ç« é‡é»**ï¼šæŒæ¡ API æ¸¬è©¦å·¥å…·å’Œæ–‡ä»¶è‡ªå‹•ç”ŸæˆæŠ€è¡“ï¼Œå»ºç«‹å®Œæ•´çš„ API å“è³ªä¿è­‰é«”ç³»ï¼Œç‚ºç”Ÿç”¢ç´šæ‡‰ç”¨å’Œ Spring AI æœå‹™æä¾›å¯é çš„æ¸¬è©¦å’Œæ–‡ä»¶åŒ–æ”¯æ´ã€‚

## ğŸ¯ å­¸ç¿’ç›®æ¨™

å®Œæˆæœ¬ç« å­¸ç¿’å¾Œï¼Œæ‚¨å°‡èƒ½å¤ ï¼š

- ğŸ¯ **ç†è§£ API æ¸¬è©¦çš„é‡è¦æ€§**ï¼šæŒæ¡ API æ¸¬è©¦åœ¨é–‹ç™¼æµç¨‹ä¸­çš„æ ¸å¿ƒåƒ¹å€¼
- ğŸ¯ **ç†Ÿç·´ä½¿ç”¨æ¸¬è©¦å·¥å…·**ï¼šæŒæ¡ Postmanã€curl ç­‰ API æ¸¬è©¦å·¥å…·çš„ä½¿ç”¨
- ğŸ¯ **å¯¦ç¾ API æ–‡ä»¶è‡ªå‹•ç”Ÿæˆ**ï¼šä½¿ç”¨ Swagger/OpenAPI å»ºç«‹å®Œæ•´çš„ API æ–‡ä»¶
- ğŸ¯ **å»ºç«‹æ¸¬è©¦æœ€ä½³å¯¦è¸**ï¼šè¨­è¨ˆæœ‰æ•ˆçš„ API æ¸¬è©¦ç­–ç•¥å’Œæµç¨‹
- ğŸ¯ **ç‚º AI æœå‹™åšæº–å‚™**ï¼šå»ºç«‹é©åˆ AI æ‡‰ç”¨çš„æ¸¬è©¦å’Œæ–‡ä»¶åŒ–æ–¹æ¡ˆ

---

## 3.3.1 ç‚ºä»€éº¼éœ€è¦ API æ¸¬è©¦ï¼Ÿ

### API æ¸¬è©¦çš„æ ¸å¿ƒåƒ¹å€¼

åœ¨ç¾ä»£ Web é–‹ç™¼ä¸­ï¼ŒAPI æ˜¯å‰å¾Œç«¯æºé€šçš„æ©‹æ¨‘ï¼Œä¹Ÿæ˜¯ AI æœå‹™çš„é‡è¦ä»‹é¢ã€‚æƒ³åƒä¸€ä¸‹ï¼Œå¦‚æœæ‚¨æ­£åœ¨é–‹ç™¼ä¸€å€‹ AI é©…å‹•çš„æ‡‰ç”¨ç¨‹å¼ï¼š

> **å¯¦éš›å ´æ™¯**ï¼šç•¶ç”¨æˆ¶ä¸Šå‚³åœ–ç‰‡è¦æ±‚ AI åˆ†ææ™‚ï¼Œå‰ç«¯éœ€è¦å‘å¾Œç«¯ API ç™¼é€è«‹æ±‚ï¼ŒAI æœå‹™è™•ç†å¾Œå›å‚³çµæœã€‚å¦‚æœé€™å€‹ API æœ‰å•é¡Œï¼Œæ•´å€‹ AI åŠŸèƒ½å°±ç„¡æ³•æ­£å¸¸é‹ä½œã€‚

**API æ¸¬è©¦çš„æ ¸å¿ƒåƒ¹å€¼**ï¼š
- âœ… **é©—è­‰åŠŸèƒ½æ­£ç¢ºæ€§**ï¼šç¢ºä¿ API æŒ‰é æœŸå·¥ä½œ
- âœ… **ææ—©ç™¼ç¾å•é¡Œ**ï¼šåœ¨ç”¨æˆ¶ä½¿ç”¨å‰å°±ç™¼ç¾ä¸¦ä¿®å¾©éŒ¯èª¤
- âœ… **æå‡é–‹ç™¼æ•ˆç‡**ï¼šå¿«é€Ÿæ¸¬è©¦ä¸åŒæƒ…å¢ƒï¼Œç„¡éœ€æ¯æ¬¡éƒ½é€éå‰ç«¯ä»‹é¢
- âœ… **æ”¹å–„åœ˜éšŠå”ä½œ**ï¼šå‰å¾Œç«¯é–‹ç™¼è€…å¯ä»¥ç”¨çµ±ä¸€çš„æ–¹å¼é©—è­‰ API
- âœ… **æ”¯æ´ AI æœå‹™æ¸¬è©¦**ï¼šé©—è­‰è¤‡é›œçš„ AI æ¨ç†å’Œå¤šæ¨¡æ…‹è™•ç†

### ä¸åŒé¡å‹çš„ API æ¸¬è©¦

| æ¸¬è©¦é¡å‹ | ç›®çš„ | æ¸¬è©¦ç¯„åœ | é©ç”¨å ´æ™¯ |
|----------|------|----------|----------|
| **åŠŸèƒ½æ¸¬è©¦** | é©—è­‰ API åŠŸèƒ½æ­£ç¢ºæ€§ | å–®ä¸€ API ç«¯é» | åŸºæœ¬ CRUD æ“ä½œ |
| **æ•´åˆæ¸¬è©¦** | é©—è­‰ç³»çµ±é–“å”ä½œ | å¤šå€‹ API ç«¯é» | æ¥­å‹™æµç¨‹æ¸¬è©¦ |
| **æ•ˆèƒ½æ¸¬è©¦** | é©—è­‰å›æ‡‰æ™‚é–“å’Œååé‡ | ç³»çµ±è² è¼‰èƒ½åŠ› | é«˜ä½µç™¼å ´æ™¯ |
| **å®‰å…¨æ¸¬è©¦** | é©—è­‰å®‰å…¨æ©Ÿåˆ¶ | èªè­‰æˆæ¬Šæ©Ÿåˆ¶ | æ•æ„Ÿè³‡æ–™ä¿è­· |
| **AI æœå‹™æ¸¬è©¦** | é©—è­‰ AI æ¨¡å‹å›æ‡‰ | AI æ¨ç†æº–ç¢ºæ€§ | æ™ºèƒ½åŠŸèƒ½é©—è­‰ |

---

## 3.3.2 ä½¿ç”¨ Postman é€²è¡Œ API æ¸¬è©¦

### Postman åŸºç¤æ“ä½œ

**å®‰è£å’Œè¨­å®š**ï¼š
1. ä¸‹è¼‰ä¸¦å®‰è£ Postman
2. å»ºç«‹å·¥ä½œå€ï¼ˆWorkspaceï¼‰
3. å»ºç«‹é›†åˆï¼ˆCollectionï¼‰ä¾†çµ„ç¹” API æ¸¬è©¦

**åŸºæœ¬ HTTP è«‹æ±‚æ¸¬è©¦**ï¼š

```http
### 1. ç²å–ä½¿ç”¨è€…åˆ—è¡¨
GET http://localhost:8080/api/users
Content-Type: application/json

### 2. æ ¹æ“š ID ç²å–ä½¿ç”¨è€…
GET http://localhost:8080/api/users/1
Content-Type: application/json

### 3. å»ºç«‹æ–°ä½¿ç”¨è€…
POST http://localhost:8080/api/users
Content-Type: application/json

{
  "name": "å¼µå°æ˜",
  "email": "ming@example.com",
  "password": "securePassword123"
}

### 4. æ›´æ–°ä½¿ç”¨è€…è³‡è¨Š
PUT http://localhost:8080/api/users/1
Content-Type: application/json

{
  "name": "å¼µå°æ˜ï¼ˆå·²æ›´æ–°ï¼‰",
  "email": "ming.updated@example.com"
}

### 5. åˆªé™¤ä½¿ç”¨è€…
DELETE http://localhost:8080/api/users/1
```

### é€²éšæ¸¬è©¦åŠŸèƒ½

**1. ç’°å¢ƒè®Šæ•¸è¨­å®š**
```javascript
// åœ¨ Postman çš„ Pre-request Script ä¸­è¨­å®š
pm.environment.set("baseUrl", "http://localhost:8080");
pm.environment.set("userId", "1");

// åœ¨è«‹æ±‚ URL ä¸­ä½¿ç”¨
{{baseUrl}}/api/users/{{userId}}
```

**2. è‡ªå‹•åŒ–æ¸¬è©¦è…³æœ¬**
```javascript
// åœ¨ Postman çš„ Tests æ¨™ç±¤ä¸­ç·¨å¯«
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

pm.test("Response has user data", function () {
    const jsonData = pm.response.json();
    pm.expect(jsonData).to.have.property('data');
    pm.expect(jsonData.data).to.have.property('id');
    pm.expect(jsonData.data).to.have.property('name');
});

pm.test("Response time is less than 500ms", function () {
    pm.expect(pm.response.responseTime).to.be.below(500);
});
```

**3. è³‡æ–™é©…å‹•æ¸¬è©¦**
```csv
# users.csv
name,email,expectedStatus
å¼µå°æ˜,ming@example.com,201
æå°è¯,hua@example.com,201
ç‹å°ç¾,invalid-email,400
```

---

## 3.3.3 ä½¿ç”¨ curl é€²è¡Œå‘½ä»¤åˆ—æ¸¬è©¦

### åŸºæœ¬ curl å‘½ä»¤

```bash
# GET è«‹æ±‚
curl -X GET "http://localhost:8080/api/users" \
     -H "Content-Type: application/json"

# POST è«‹æ±‚
curl -X POST "http://localhost:8080/api/users" \
     -H "Content-Type: application/json" \
     -d '{
       "name": "æ¸¬è©¦ä½¿ç”¨è€…",
       "email": "test@example.com",
       "password": "password123"
     }'

# PUT è«‹æ±‚
curl -X PUT "http://localhost:8080/api/users/1" \
     -H "Content-Type: application/json" \
     -d '{
       "name": "æ›´æ–°çš„ä½¿ç”¨è€…",
       "email": "updated@example.com"
     }'

# DELETE è«‹æ±‚
curl -X DELETE "http://localhost:8080/api/users/1" \
     -H "Content-Type: application/json"
```

### é€²éš curl åŠŸèƒ½

```bash
# é¡¯ç¤ºè©³ç´°è³‡è¨Š
curl -v -X GET "http://localhost:8080/api/users"

# å„²å­˜å›æ‡‰åˆ°æª”æ¡ˆ
curl -X GET "http://localhost:8080/api/users" -o users.json

# åŒ…å«èªè­‰æ¨™é ­
curl -X GET "http://localhost:8080/api/users" \
     -H "Authorization: Bearer your-jwt-token"

# ä¸Šå‚³æª”æ¡ˆ
curl -X POST "http://localhost:8080/api/upload" \
     -F "file=@/path/to/your/file.jpg" \
     -F "description=æ¸¬è©¦åœ–ç‰‡"

# æ¸¬è©¦æ•ˆèƒ½ï¼ˆé¡¯ç¤ºæ™‚é–“è³‡è¨Šï¼‰
curl -w "@curl-format.txt" -X GET "http://localhost:8080/api/users"
```

**curl-format.txt å…§å®¹**ï¼š
```
     time_namelookup:  %{time_namelookup}\n
        time_connect:  %{time_connect}\n
     time_appconnect:  %{time_appconnect}\n
    time_pretransfer:  %{time_pretransfer}\n
       time_redirect:  %{time_redirect}\n
  time_starttransfer:  %{time_starttransfer}\n
                     ----------\n
          time_total:  %{time_total}\n
```

---

## 3.3.4 API æ–‡ä»¶è‡ªå‹•ç”Ÿæˆ

### ç‚ºä»€éº¼éœ€è¦ API æ–‡ä»¶ï¼Ÿ

API æ–‡ä»¶å°±åƒæ˜¯ã€Œä½¿ç”¨æŒ‡å—ã€ï¼Œå°æ–¼é–‹ç™¼åœ˜éšŠå”ä½œå’Œç¬¬ä¸‰æ–¹æ•´åˆè‡³é—œé‡è¦ï¼š

**æ²’æœ‰æ–‡ä»¶çš„ç—›é»**ï¼š
```java
// æ²’æœ‰æ–‡ä»¶çš„ API - è®“äººå›°æƒ‘
@GetMapping("/users/{id}")
public ResponseEntity<?> getUser(@PathVariable String id) {
    // é€™å€‹ API åšä»€éº¼ï¼Ÿ
    // åƒæ•¸æ ¼å¼æ˜¯ä»€éº¼ï¼Ÿ
    // å›å‚³ä»€éº¼è³‡æ–™ï¼Ÿ
    // å¯èƒ½çš„éŒ¯èª¤ç¢¼æœ‰å“ªäº›ï¼Ÿ
}
```

### æ•´åˆ Swagger/OpenAPI

**1. æ·»åŠ ä¾è³´**
```xml
<!-- pom.xml -->
<dependency>
    <groupId>org.springdoc</groupId>
    <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
    <version>2.2.0</version>
</dependency>
```

**2. åŸºæœ¬é…ç½®**
```java
@Configuration
public class OpenApiConfig {
    
    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
                .info(new Info()
                        .title("ä½¿ç”¨è€…ç®¡ç†ç³»çµ± API")
                        .version("1.0.0")
                        .description("ç”Ÿç”¢ç´š API é–‹ç™¼å¯¦è¸ç¯„ä¾‹")
                        .contact(new Contact()
                                .name("é–‹ç™¼åœ˜éšŠ")
                                .email("dev@example.com")
                                .url("https://example.com"))
                        .license(new License()
                                .name("MIT License")
                                .url("https://opensource.org/licenses/MIT")))
                .servers(Arrays.asList(
                        new Server().url("http://localhost:8080").description("é–‹ç™¼ç’°å¢ƒ"),
                        new Server().url("https://api.example.com").description("ç”Ÿç”¢ç’°å¢ƒ")
                ));
    }
}
```

### ä½¿ç”¨ Swagger è¨»è§£

```java
@RestController
@RequestMapping("/api/users")
@Tag(name = "ä½¿ç”¨è€…ç®¡ç†", description = "ä½¿ç”¨è€…ç›¸é—œçš„ CRUD æ“ä½œ")
public class UserController {
    
    private final UserService userService;
    
    public UserController(UserService userService) {
        this.userService = userService;
    }
    
    @Operation(
        summary = "ç²å–æ‰€æœ‰ä½¿ç”¨è€…",
        description = "ç²å–ç³»çµ±ä¸­æ‰€æœ‰ä½¿ç”¨è€…çš„åˆ—è¡¨ï¼Œæ”¯æ´åˆ†é å’Œæ’åº"
    )
    @ApiResponses(value = {
        @ApiResponse(
            responseCode = "200",
            description = "æˆåŠŸç²å–ä½¿ç”¨è€…åˆ—è¡¨",
            content = @Content(
                mediaType = "application/json",
                schema = @Schema(implementation = ApiResponse.class)
            )
        ),
        @ApiResponse(
            responseCode = "500",
            description = "ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤"
        )
    })
    @GetMapping
    public ResponseEntity<ApiResponse<List<User>>> getAllUsers(
            @Parameter(description = "é ç¢¼ï¼Œå¾ 0 é–‹å§‹", example = "0")
            @RequestParam(defaultValue = "0") int page,
            
            @Parameter(description = "æ¯é å¤§å°", example = "10")
            @RequestParam(defaultValue = "10") int size) {
        
        Pageable pageable = PageRequest.of(page, size);
        Page<User> users = userService.findAll(pageable);
        return ResponseEntity.ok(ApiResponse.success("ç²å–æˆåŠŸ", users.getContent()));
    }
    
    @Operation(
        summary = "æ ¹æ“š ID ç²å–ä½¿ç”¨è€…",
        description = "æ ¹æ“šä½¿ç”¨è€… ID ç²å–ç‰¹å®šä½¿ç”¨è€…çš„è©³ç´°è³‡è¨Š"
    )
    @GetMapping("/{id}")
    public ResponseEntity<ApiResponse<User>> getUserById(
            @Parameter(description = "ä½¿ç”¨è€… ID", required = true, example = "1")
            @PathVariable Long id) {
        
        User user = userService.findById(id);
        return ResponseEntity.ok(ApiResponse.success("ç²å–æˆåŠŸ", user));
    }
    
    @Operation(
        summary = "å»ºç«‹æ–°ä½¿ç”¨è€…",
        description = "å»ºç«‹ä¸€å€‹æ–°çš„ä½¿ç”¨è€…å¸³è™Ÿ"
    )
    @PostMapping
    public ResponseEntity<ApiResponse<User>> createUser(
            @Parameter(description = "ä½¿ç”¨è€…å»ºç«‹è«‹æ±‚", required = true)
            @Valid @RequestBody CreateUserRequest request) {
        
        User user = userService.createUser(request);
        return ResponseEntity.status(HttpStatus.CREATED)
                .body(ApiResponse.success("å»ºç«‹æˆåŠŸ", user));
    }
}
```

### ç‚ºè³‡æ–™æ¨¡å‹æ·»åŠ æ–‡ä»¶

```java
@Schema(description = "ä½¿ç”¨è€…è³‡è¨Š")
public class User {
    
    @Schema(description = "ä½¿ç”¨è€… ID", example = "1", accessMode = Schema.AccessMode.READ_ONLY)
    private Long id;
    
    @Schema(description = "ä½¿ç”¨è€…åç¨±", example = "å¼µå°æ˜", requiredMode = Schema.RequiredMode.REQUIRED)
    private String name;
    
    @Schema(description = "é›»å­éƒµä»¶åœ°å€", example = "ming@example.com", requiredMode = Schema.RequiredMode.REQUIRED)
    private String email;
    
    @Schema(description = "å»ºç«‹æ™‚é–“", example = "2024-01-15T10:30:00Z", accessMode = Schema.AccessMode.READ_ONLY)
    private LocalDateTime createdAt;
    
    // Getters and Setters
}

@Schema(description = "å»ºç«‹ä½¿ç”¨è€…è«‹æ±‚")
public class CreateUserRequest {
    
    @Schema(description = "ä½¿ç”¨è€…åç¨±", example = "å¼µå°æ˜", requiredMode = Schema.RequiredMode.REQUIRED)
    @NotBlank(message = "ä½¿ç”¨è€…åç¨±ä¸èƒ½ç‚ºç©º")
    private String name;
    
    @Schema(description = "é›»å­éƒµä»¶åœ°å€", example = "ming@example.com", requiredMode = Schema.RequiredMode.REQUIRED)
    @NotBlank(message = "é›»å­éƒµä»¶ä¸èƒ½ç‚ºç©º")
    @Email(message = "é›»å­éƒµä»¶æ ¼å¼ä¸æ­£ç¢º")
    private String email;
    
    @Schema(description = "å¯†ç¢¼", example = "securePassword123", requiredMode = Schema.RequiredMode.REQUIRED)
    @NotBlank(message = "å¯†ç¢¼ä¸èƒ½ç‚ºç©º")
    @Size(min = 8, message = "å¯†ç¢¼é•·åº¦è‡³å°‘ 8 å­—å…ƒ")
    private String password;
    
    // Getters and Setters
}
```

---

## 3.3.5 ç‚º Spring AI åšæº–å‚™

### AI æœå‹™çš„ç‰¹æ®Šæ¸¬è©¦éœ€æ±‚

**1. æµå¼å›æ‡‰æ¸¬è©¦**
```bash
# æ¸¬è©¦ AI æµå¼å°è©±
curl -N -X POST "http://localhost:8080/api/ai/chat/stream" \
     -H "Content-Type: application/json" \
     -H "Accept: text/event-stream" \
     -d '{
       "message": "è«‹ä»‹ç´¹ä¸€ä¸‹ Spring Boot",
       "temperature": 0.7
     }'
```

**2. å¤šåª’é«”å…§å®¹æ¸¬è©¦**
```bash
# æ¸¬è©¦åœ–ç‰‡åˆ†æ API
curl -X POST "http://localhost:8080/api/ai/analyze/image" \
     -F "image=@test-image.jpg" \
     -F "prompt=æè¿°é€™å¼µåœ–ç‰‡çš„å…§å®¹"

# æ¸¬è©¦éŸ³è¨Šè½‰æ–‡å­— API
curl -X POST "http://localhost:8080/api/ai/transcribe" \
     -F "audio=@test-audio.wav" \
     -F "language=zh-TW"
```

### AI API æ–‡ä»¶åŒ–ç¯„ä¾‹

```java
@RestController
@RequestMapping("/api/ai")
@Tag(name = "AI æœå‹™", description = "äººå·¥æ™ºæ…§ç›¸é—œçš„ API æœå‹™")
public class AIController {
    
    @Operation(
        summary = "AI å°è©±æœå‹™",
        description = "èˆ‡ AI æ¨¡å‹é€²è¡Œå°è©±ï¼Œæ”¯æ´ä¸Šä¸‹æ–‡è¨˜æ†¶"
    )
    @ApiResponses(value = {
        @ApiResponse(
            responseCode = "200",
            description = "å°è©±æˆåŠŸ",
            content = @Content(
                mediaType = "application/json",
                schema = @Schema(implementation = ChatResponse.class)
            )
        ),
        @ApiResponse(
            responseCode = "400",
            description = "è«‹æ±‚åƒæ•¸éŒ¯èª¤"
        ),
        @ApiResponse(
            responseCode = "429",
            description = "è«‹æ±‚é »ç‡éé«˜"
        )
    })
    @PostMapping("/chat")
    public ResponseEntity<ApiResponse<ChatResponse>> chat(
            @Parameter(description = "å°è©±è«‹æ±‚", required = true)
            @Valid @RequestBody ChatRequest request) {
        
        // é ç•™çµ¦ Spring AI æ•´åˆ
        ChatResponse response = new ChatResponse("é€™æ˜¯ AI çš„å›æ‡‰");
        return ResponseEntity.ok(ApiResponse.success("å°è©±æˆåŠŸ", response));
    }
    
    @Operation(
        summary = "æµå¼å°è©±æœå‹™",
        description = "èˆ‡ AI æ¨¡å‹é€²è¡Œæµå¼å°è©±ï¼Œå³æ™‚ç²å–å›æ‡‰"
    )
    @PostMapping(value = "/chat/stream", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
    public SseEmitter chatStream(
            @Parameter(description = "æµå¼å°è©±è«‹æ±‚", required = true)
            @Valid @RequestBody ChatRequest request) {
        
        SseEmitter emitter = new SseEmitter();
        // é ç•™çµ¦ Spring AI æµå¼è™•ç†
        return emitter;
    }
}

@Schema(description = "AI å°è©±è«‹æ±‚")
public class ChatRequest {
    
    @Schema(description = "ä½¿ç”¨è€…è¨Šæ¯", example = "è«‹ä»‹ç´¹ä¸€ä¸‹ Spring Boot", requiredMode = Schema.RequiredMode.REQUIRED)
    @NotBlank(message = "è¨Šæ¯ä¸èƒ½ç‚ºç©º")
    private String message;
    
    @Schema(description = "æº«åº¦åƒæ•¸ï¼Œæ§åˆ¶å›æ‡‰çš„éš¨æ©Ÿæ€§", example = "0.7", minimum = "0", maximum = "2")
    @DecimalMin(value = "0.0", message = "æº«åº¦å€¼å¿…é ˆå¤§æ–¼ç­‰æ–¼ 0")
    @DecimalMax(value = "2.0", message = "æº«åº¦å€¼å¿…é ˆå°æ–¼ç­‰æ–¼ 2")
    private Double temperature = 0.7;
    
    @Schema(description = "æœ€å¤§ token æ•¸", example = "1000", minimum = "1", maximum = "4096")
    @Min(value = 1, message = "æœ€å¤§ token æ•¸å¿…é ˆå¤§æ–¼ 0")
    @Max(value = 4096, message = "æœ€å¤§ token æ•¸ä¸èƒ½è¶…é 4096")
    private Integer maxTokens = 1000;
    
    // Getters and Setters
}
```

### æ•ˆèƒ½æ¸¬è©¦æº–å‚™

```bash
# ä½¿ç”¨ Apache Bench é€²è¡Œå£“åŠ›æ¸¬è©¦
ab -n 1000 -c 10 -H "Content-Type: application/json" \
   -p chat-request.json \
   http://localhost:8080/api/ai/chat

# ä½¿ç”¨ wrk é€²è¡Œæ›´é€²éšçš„æ•ˆèƒ½æ¸¬è©¦
wrk -t12 -c400 -d30s --script=chat-test.lua \
    http://localhost:8080/api/ai/chat
```

**chat-test.lua è…³æœ¬**ï¼š
```lua
wrk.method = "POST"
wrk.body   = '{"message": "æ¸¬è©¦è¨Šæ¯", "temperature": 0.7}'
wrk.headers["Content-Type"] = "application/json"

function response(status, headers, body)
    if status ~= 200 then
        print("Error: " .. status .. " " .. body)
    end
end
```

---

## ğŸ“ æœ¬ç« é‡é»å›é¡§

1. **API æ¸¬è©¦é‡è¦æ€§**ï¼šç†è§£äº† API æ¸¬è©¦åœ¨é–‹ç™¼æµç¨‹ä¸­çš„æ ¸å¿ƒåƒ¹å€¼
2. **æ¸¬è©¦å·¥å…·ä½¿ç”¨**ï¼šæŒæ¡äº† Postman å’Œ curl çš„åŸºæœ¬å’Œé€²éšåŠŸèƒ½
3. **API æ–‡ä»¶åŒ–**ï¼šå­¸æœƒäº†ä½¿ç”¨ Swagger/OpenAPI è‡ªå‹•ç”Ÿæˆå®Œæ•´çš„ API æ–‡ä»¶
4. **æ¸¬è©¦æœ€ä½³å¯¦è¸**ï¼šå»ºç«‹äº†æœ‰æ•ˆçš„ API æ¸¬è©¦ç­–ç•¥å’Œæµç¨‹
5. **AI æœå‹™æº–å‚™**ï¼šç‚º Spring AI çš„ç‰¹æ®Šæ¸¬è©¦éœ€æ±‚åšå¥½äº†æº–å‚™

### ä¸‹ä¸€æ­¥å­¸ç¿’æ–¹å‘

å®Œæˆç¬¬ä¸‰ç« çš„å­¸ç¿’å¾Œï¼Œæˆ‘å€‘å·²ç¶“å»ºç«‹äº†å®Œæ•´çš„ç”Ÿç”¢ç´š API é–‹ç™¼æŠ€èƒ½ã€‚åœ¨ç¬¬å››ç« ä¸­ï¼Œæˆ‘å€‘å°‡æ­£å¼é€²å…¥ Spring AI çš„ä¸–ç•Œï¼Œå­¸ç¿’å¦‚ä½•æ•´åˆå’Œä½¿ç”¨ AI æœå‹™ã€‚

---

**åƒè€ƒè³‡æ–™ï¼š**
- [Postman Documentation](https://learning.postman.com/docs/)
- [OpenAPI Specification](https://swagger.io/specification/)
- [SpringDoc OpenAPI](https://springdoc.org/)
- [curl Manual](https://curl.se/docs/manual.html)