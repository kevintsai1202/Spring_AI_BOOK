# 5.5 è²å„ªå¤ªèŠ±éŒ¢ï¼Ÿæ‰¾ AI å¹«ä½ é…éŸ³

> **æœ¬ç« é‡é»**ï¼šå­¸ç¿’ä½¿ç”¨ Spring AI çš„æ–‡å­—è½‰èªéŸ³åŠŸèƒ½ï¼Œå»ºç«‹å®Œæ•´çš„ AI é…éŸ³ç³»çµ±ï¼ŒæŒæ¡èªéŸ³åˆæˆå’ŒéŸ³è¨Šè™•ç†æŠ€è¡“ï¼Œç‚ºå¤šåª’é«”å…§å®¹å‰µä½œæä¾›å°ˆæ¥­çš„èªéŸ³è§£æ±ºæ–¹æ¡ˆã€‚

## ğŸ¯ å­¸ç¿’ç›®æ¨™

å®Œæˆæœ¬ç« å­¸ç¿’å¾Œï¼Œæ‚¨å°‡èƒ½å¤ ï¼š

- ğŸ¯ **ç†è§£æ–‡å­—è½‰èªéŸ³æŠ€è¡“**ï¼šæŒæ¡ TTS æŠ€è¡“çš„å·¥ä½œåŸç†å’Œæ‡‰ç”¨å ´æ™¯
- ğŸ¯ **å¯¦ç¾å¤šç¨®èªéŸ³é¢¨æ ¼**ï¼šæ”¯æ´ä¸åŒè²éŸ³ã€èªé€Ÿã€èªèª¿çš„èªéŸ³ç”Ÿæˆ
- ğŸ¯ **å»ºç«‹é…éŸ³ç®¡ç†ç³»çµ±**ï¼šå®Œæ•´çš„èªéŸ³ç”Ÿæˆã€å„²å­˜å’Œä¸‹è¼‰åŠŸèƒ½
- ğŸ¯ **å„ªåŒ–èªéŸ³å“è³ª**ï¼šæŒæ¡èªéŸ³åƒæ•¸èª¿æ•´å’Œå“è³ªæ§åˆ¶æŠ€å·§
- ğŸ¯ **ä¼æ¥­ç´šæ‡‰ç”¨è¨­è¨ˆ**ï¼šå»ºç«‹å¯å•†ç”¨çš„ AI é…éŸ³æœå‹™å¹³å°

---

## 5.5.1 AI é…éŸ³æŠ€è¡“é©å‘½

### AI æœ‰ ABC è…”èª¿

![AI é…éŸ³](https://ithelp.ithome.com.tw/upload/images/20240810/20161290YGtkKt0BkG.jpg)

æ˜¨å¤©æ•™å¤§å®¶ä¸Šå­—å¹•ï¼Œä»Šå¤©å‰‡æ˜¯åéä¾†ï¼Œçµ¦æ–‡å­—è®“ AI å¹«ä½ é…éŸ³ï¼

æ¯”èµ·ä»¥å‰æ–‡å­—è½‰è²éŸ³çš„è»Ÿé«”ï¼ŒAI çš„è²éŸ³æ›´ç‚ºè‡ªç„¶ï¼Œè§’è‰²è·Ÿé€Ÿåº¦ä¹Ÿéƒ½èƒ½èª¿æ•´ï¼Œè®“æˆ‘å€‘çœ‹çœ‹å¦‚ä½•æ“ä½œå§ã€‚

### AI é…éŸ³ vs å‚³çµ±é…éŸ³å°æ¯”

| æ¯”è¼ƒé …ç›® | AI é…éŸ³ | å‚³çµ±é…éŸ³ | å„ªå‹¢åˆ†æ |
|----------|---------|----------|----------|
| **æˆæœ¬** | $0.015/1Kå­—å…ƒ | $50-200/åˆ†é˜ | AI ç¯€çœ 95%+ æˆæœ¬ |
| **é€Ÿåº¦** | å³æ™‚ç”Ÿæˆ | æ•¸å¤©è£½ä½œ | AI å¿« 100+ å€ |
| **ä¸€è‡´æ€§** | å®Œå…¨ä¸€è‡´ | äººç‚ºè®ŠåŒ– | AI å“è³ªç©©å®š |
| **å¯èª¿æ€§** | éš¨æ™‚èª¿æ•´ | é‡æ–°éŒ„è£½ | AI å½ˆæ€§æ¥µé«˜ |
| **èªè¨€æ”¯æ´** | å¤šèªè¨€ | é™åˆ¶è¼ƒå¤š | AI æ”¯æ´æ›´å»£ |
| **æƒ…æ„Ÿè¡¨é”** | æŒçºŒæ”¹å–„ | è‡ªç„¶è±å¯Œ | å‚³çµ±ä»æœ‰å„ªå‹¢ |

### AI é…éŸ³çš„æ ¸å¿ƒåƒ¹å€¼

**1. æˆæœ¬æ•ˆç›Šé¡¯è‘—**
- ğŸ’° **å¤§å¹…é™ä½æˆæœ¬**ï¼šç›¸æ¯”å°ˆæ¥­é…éŸ³å“¡ç¯€çœ 95% ä»¥ä¸Šè²»ç”¨
- â° **å³æ™‚ç”Ÿæˆ**ï¼šå¾æ–‡å­—åˆ°èªéŸ³å¹¾ç§’é˜å®Œæˆ
- ğŸ”„ **ç„¡é™ä¿®æ”¹**ï¼šéš¨æ™‚èª¿æ•´å…§å®¹ç„¡é¡å¤–æˆæœ¬
- ğŸ“ˆ **è¦æ¨¡åŒ–ç”Ÿç”¢**ï¼šæ‰¹æ¬¡è™•ç†å¤§é‡å…§å®¹

**2. å“è³ªæŒçºŒæå‡**
- ğŸ­ **å¤šç¨®è²éŸ³é¸æ“‡**ï¼šç”·è²ã€å¥³è²ã€ä¸åŒå¹´é½¡å’Œé¢¨æ ¼
- ğŸµ **èªèª¿æ§åˆ¶**ï¼šèª¿æ•´èªé€Ÿã€éŸ³èª¿ã€æƒ…æ„Ÿè¡¨é”
- ğŸŒ **å¤šèªè¨€æ”¯æ´**ï¼šæ”¯æ´æ•¸åç¨®èªè¨€å’Œæ–¹è¨€
- ğŸ”Š **é«˜å“è³ªéŸ³è¨Š**ï¼šCD ç´šéŸ³è³ªè¼¸å‡º

**3. æ‡‰ç”¨å ´æ™¯å»£æ³›**
- ğŸ“š **æ•™è‚²åŸ¹è¨“**ï¼šèª²ç¨‹è¬›è§£ã€æœ‰è²æ›¸è£½ä½œ
- ğŸ¬ **å½±ç‰‡è£½ä½œ**ï¼šæ—ç™½é…éŸ³ã€è§’è‰²å°è©±
- ğŸ“¢ **å»£å‘Šè¡ŒéŠ·**ï¼šå»£å‘Šé…éŸ³ã€ç”¢å“ä»‹ç´¹
- ğŸ¤– **æ™ºèƒ½åŠ©æ‰‹**ï¼šèªéŸ³å›æ‡‰ã€å®¢æœç³»çµ±
- ğŸ® **éŠæˆ²é–‹ç™¼**ï¼šè§’è‰²é…éŸ³ã€åŠ‡æƒ…å°è©±

---

## 5.5.2 Spring AI èªéŸ³ç”Ÿæˆæœå‹™

### ä¸»è¦æ”¯æ´çš„èªéŸ³æœå‹™

| æœå‹™å•† | æ¨¡å‹ | èªéŸ³é¸é … | å“è³ª | æˆæœ¬ | æ¨è–¦å ´æ™¯ |
|--------|------|----------|------|------|----------|
| **OpenAI** | TTS-1, TTS-1-HD | 6ç¨®è²éŸ³ | æ¥µé«˜ | ä¸­ | é€šç”¨é…éŸ³ã€å°ˆæ¥­è£½ä½œ |
| **Azure OpenAI** | TTS-1, TTS-1-HD | 6ç¨®è²éŸ³ | æ¥µé«˜ | ä¸­ | ä¼æ¥­ç´šæ‡‰ç”¨ |
| **ElevenLabs** | å¤šç¨®æ¨¡å‹ | è‡ªè¨‚è²éŸ³ | æ¥µé«˜ | é«˜ | é«˜ç«¯é…éŸ³ã€è²éŸ³å…‹éš† |
| **Google Cloud** | WaveNet | å¤šç¨®è²éŸ³ | é«˜ | ä½ | å¤§é‡ç”Ÿæˆã€æˆæœ¬æ•æ„Ÿ |

### OpenAI TTS èªéŸ³é¸é …è©³è§£

æ–‡å­—è½‰èªéŸ³ä¹Ÿæ˜¯åŠƒåˆ†åœ¨ **Audio Model** çš„éƒ¨åˆ†ï¼ŒSpring AI ç›®å‰ä¸»è¦æ”¯æ´ OpenAI å’Œ Azure OpenAIï¼š

![Spring AI èªéŸ³æ”¯æ´](https://ithelp.ithome.com.tw/upload/images/20240809/20161290wi54q7gekg.png)

**OpenAI TTS å¯ç”¨è²éŸ³**ï¼š

| è²éŸ³åç¨± | ç‰¹è‰² | é©ç”¨å ´æ™¯ | èªè¨€æ”¯æ´ |
|----------|------|----------|----------|
| **alloy** | ä¸­æ€§ã€æ¸…æ™° | æ–°èæ’­å ±ã€æ•™å­¸ | å¤šèªè¨€ |
| **echo** | ç”·æ€§ã€æ²‰ç©© | å•†æ¥­ç°¡å ±ã€ç´€éŒ„ç‰‡ | å¤šèªè¨€ |
| **fable** | å¥³æ€§ã€æº«æš– | æ•…äº‹è¬›è¿°ã€å®¢æœ | å¤šèªè¨€ |
| **onyx** | ç”·æ€§ã€æ·±æ²‰ | å»£å‘Šé…éŸ³ã€æ—ç™½ | å¤šèªè¨€ |
| **nova** | å¥³æ€§ã€æ´»æ½‘ | å»£å‘Šã€å¨›æ¨‚å…§å®¹ | å¤šèªè¨€ |
| **shimmer** | å¥³æ€§ã€æŸ”å’Œ | å†¥æƒ³ã€æ”¾é¬†å…§å®¹ | å¤šèªè¨€ |

**æ¨¡å‹å·®ç•°**ï¼š
- **TTS-1**ï¼šæ¨™æº–å“è³ªï¼Œé€Ÿåº¦å¿«ï¼Œæˆæœ¬ä½
- **TTS-1-HD**ï¼šé«˜å“è³ªï¼ŒéŸ³è³ªæ›´ä½³ï¼Œæˆæœ¬ç¨é«˜

---

## 5.5.3 å°ˆæ¡ˆå»ºç«‹èˆ‡é…ç½®

```yaml
# application.yml
spring:
  application:
    name: spring-ai-voice-generation

  # æ’é™¤ Redis è‡ªå‹•é…ç½®ï¼ˆç³»çµ±ç„¡ Redis æœå‹™å™¨æ™‚ä½¿ç”¨ï¼‰
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration
      - org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration

  # OpenAI é…ç½®
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      base-url: https://api.openai.com
      audio:
        speech:
          options:
            model: tts-1-hd
            voice: alloy
            response-format: mp3
            speed: 1.0

# æ‡‰ç”¨ç¨‹å¼é…ç½®
app:
  voice:
    generation:
      max-batch-size: 10
      default-timeout: 30s
      cache-enabled: true
      output-directory: ./generated-voices
      supported-formats: ["mp3", "opus", "aac", "flac"]
      max-text-length: 4096
      default-voice: alloy
      default-model: tts-1-hd
```
---

## 5.5.4 åŸºç¤èªéŸ³ç”ŸæˆåŠŸèƒ½

### èªéŸ³ç”Ÿæˆæ§åˆ¶å™¨

```java
### èªéŸ³ç”Ÿæˆæœå‹™

```java

@Service
@RequiredArgsConstructor
@Slf4j
public class VoiceGenerationService {
    
    private final SpeechModel speechModel;
    private final VoiceStorageService storageService;
    
    /**
     * åŸºç¤èªéŸ³ç”Ÿæˆ
     * @param text æ–‡å­—å…§å®¹
     * @param voice è²éŸ³é¸æ“‡
     * @param speed èªé€Ÿ
     * @return éŸ³è¨Šè³‡æ–™
     */
    public byte[] generateVoice(String text, String voice, Float speed) {
        try {
            // å»ºç«‹èªéŸ³é¸é …
            OpenAiAudioSpeechOptions options = OpenAiAudioSpeechOptions.builder()
                    .model("tts-1-hd")
                    .voice(OpenAiAudioApi.SpeechRequest.Voice.valueOf(voice.toUpperCase()))
                    .responseFormat(OpenAiAudioApi.SpeechRequest.AudioResponseFormat.MP3)
                    .speed(speed)
                    .build();
            
            // å»ºç«‹èªéŸ³è«‹æ±‚
            SpeechPrompt speechPrompt = new SpeechPrompt(text, options);
            
            // åŸ·è¡ŒèªéŸ³ç”Ÿæˆ
            SpeechResponse response = speechModel.call(speechPrompt);
            
            return response.getResult().getOutput();
            
        } catch (Exception e) {
            log.error("èªéŸ³ç”Ÿæˆå¤±æ•—ï¼š{}", text, e);
            throw new RuntimeException("èªéŸ³ç”Ÿæˆå¤±æ•—ï¼š" + e.getMessage(), e);
        }
    }
    
    /**
     * é€²éšèªéŸ³ç”Ÿæˆ
     * @param request èªéŸ³ç”Ÿæˆè«‹æ±‚
     * @return èªéŸ³å›æ‡‰
     */
    public VoiceResponse generateAdvancedVoice(VoiceRequest request) {
        try {
            // å»ºç«‹é€²éšèªéŸ³é¸é …
            OpenAiAudioSpeechOptions options = OpenAiAudioSpeechOptions.builder()
                    .model(request.getModel())
                    .voice(OpenAiAudioApi.SpeechRequest.Voice.valueOf(
                            request.getVoice().toUpperCase()))
                    .responseFormat(OpenAiAudioApi.SpeechRequest.AudioResponseFormat
                            .valueOf(request.getFormat().toUpperCase()))
                    .speed(request.getSpeed())
                    .build();
            
            SpeechPrompt speechPrompt = new SpeechPrompt(request.getText(), options);
            SpeechResponse response = speechModel.call(speechPrompt);
            
            byte[] audioData = response.getResult().getOutput();
            
            // å„²å­˜éŸ³è¨Šæª”æ¡ˆï¼ˆå¦‚æœéœ€è¦ï¼‰
            String filePath = null;
            if (request.isSaveFile()) {
                filePath = storageService.saveAudioFile(
                        audioData, 
                        request.getText(), 
                        request.getVoice(), 
                        request.getFormat()
                );
            }
            
            return VoiceResponse.builder()
                    .success(true)
                    .text(request.getText())
                    .voice(request.getVoice())
                    .model(request.getModel())
                    .format(request.getFormat())
                    .speed(request.getSpeed())
                    .audioData(audioData)
                    .filePath(filePath)
                    .fileSize((long) audioData.length)
                    .duration(estimateAudioDuration(request.getText(), request.getSpeed()))
                    .timestamp(LocalDateTime.now())
                    .build();
            
        } catch (Exception e) {
            log.error("é€²éšèªéŸ³ç”Ÿæˆå¤±æ•—ï¼š{}", request.getText(), e);
            throw new RuntimeException("é€²éšèªéŸ³ç”Ÿæˆå¤±æ•—ï¼š" + e.getMessage(), e);
        }
    }
}
```

---

## ğŸ“ æœ¬ç« é‡é»å›é¡§
1. **æ–‡å­—è½‰èªéŸ³æŠ€è¡“**ï¼šæŒæ¡äº† TTS æŠ€è¡“çš„å·¥ä½œåŸç†å’Œ AI é…éŸ³å„ªå‹¢
2. **å¤šè²éŸ³æ”¯æ´**ï¼šå¯¦ç¾äº†ä¸åŒé¢¨æ ¼çš„ AI è²éŸ³é¸æ“‡

### æˆæœ¬æ•ˆç›Šåˆ†æ

**OpenAI TTS å®šåƒ¹**ï¼š
- ğŸ’° **æˆæœ¬**ï¼š$0.015 per 1K characters
- â±ï¸ **é€Ÿåº¦**ï¼šå³æ™‚ç”Ÿæˆï¼Œç„¡ç­‰å¾…æ™‚é–“
- ğŸ¯ **å“è³ª**ï¼šæ¥è¿‘äººè²çš„è‡ªç„¶åº¦
- ğŸ“Š **æ€§åƒ¹æ¯”**ï¼šç›¸æ¯”å°ˆæ¥­é…éŸ³ç¯€çœ 95%+ æˆæœ¬

### æœ€ä½³å¯¦è¸å»ºè­°

1. **æ–‡å­—é è™•ç†**ï¼šå„ªåŒ–æ•¸å­—ã€ç¸®å¯«å’Œæ¨™é»ç¬¦è™Ÿ
2. **è²éŸ³é¸æ“‡**ï¼šæ ¹æ“šå…§å®¹é¡å‹é¸æ“‡åˆé©çš„è²éŸ³
3. **èªé€Ÿèª¿æ•´**ï¼šæ ¹æ“šè½çœ¾å’Œå ´æ™¯èª¿æ•´èªé€Ÿ
4. **æ‰¹æ¬¡è™•ç†**ï¼šå¤§é‡å…§å®¹ä½¿ç”¨éåŒæ­¥è™•ç†æå‡æ•ˆç‡
5. **å“è³ªæ§åˆ¶**ï¼šå¯¦æ–½æ–‡å­—å“è³ªè©•ä¼°å’ŒèªéŸ³å¾Œè™•ç†

### ä¸‹ä¸€æ­¥å­¸ç¿’æ–¹å‘

åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘å€‘å°‡å­¸ç¿’ Function Calling æŠ€è¡“ï¼Œæ¢ç´¢å¦‚ä½•è®“ AI èª¿ç”¨å¤–éƒ¨å·¥å…·å’Œæœå‹™ï¼Œå¯¦ç¾æ›´å¼·å¤§çš„åŠŸèƒ½æ•´åˆã€‚

---

**åƒè€ƒè³‡æ–™ï¼š**
- [Spring AI Audio Speech Documentation](https://docs.spring.io/spring-ai/reference/api/audio.html)
- [OpenAI Text-to-Speech API](https://platform.openai.com/docs/guides/text-to-speech)
- [Audio Format Specifications](https://en.wikipedia.org/wiki/Audio_file_format)
- [Speech Synthesis Markup Language (SSML)](https://www.w3.org/TR/speech-synthesis/)